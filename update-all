#!/bin/zsh

DIR=$(dirname $0)
git -C $DIR fetch && git -C $DIR pull --rebase

# Update and upgrade latest brew packages
brew update && brew outdated && brew upgrade --no-quarantine && brew cleanup
brew upgrade --cask --greedy --no-quarantine && brew cleanup
brew autoremove

# Update npm packages
npm update -g

# Update virtual environment for python
PIP=$DOTFILES/configs/neovim/venv/bin/pip3
$PIP install --upgrade $($PIP freeze | cut -d '=' -f 1)

# Update zgenom
source "${HOME}/.zgenom/zgenom.zsh" && zgenom update

# Clear all cache
rm -rf ~/.npm ~/Library/Caches/pip $(brew --cache)

# Get new shell
exec zsh
